<div class="layout-container" style="display: flex; min-height: 100vh;">
  <!-- Sidebar -->
  <div class="sidebar bg-dark shadow-lg" style="
        width: 250px;
        padding: 1rem;
        position: fixed;
        top: 0;
        left: 0;
        height: 100vh;
        overflow-y: auto;">
    <h3 style="color: white;">Actions</h3>
    <ul style="list-style-type: none; padding: 0;">
      <li style="margin-bottom: 0.5rem;">
        <button (click)="toggleAddPopup()" class="btn btn-outline-light navbar-dark">
          ‚ûï Add Etudiant
        </button>
      </li>
      <li style="margin-bottom: 0.5rem;">
        <button (click)="getEtudiants()" class="btn btn-outline-light navbar-dark">
          üìÑ Get All Etudiants
        </button>
      </li>
    </ul>
  </div>

  <!-- Main Content -->
  <div class="main-content" style="
        flex-grow: 1;
        padding: 2rem;
        margin-left: 250px; /* Adjust to the sidebar width */
        position: relative;">

    <!-- Etudiants Table -->
    <div style="position: relative; z-index: 2;">
      <table class="table table-bordered table-striped table-hover shadow" style="width: 100%;">
        <thead class="thead-dark" style="position: sticky; top: 0;">
        <tr>
          <th>Id</th>
          <th>Nom</th>
          <th>Pr√©nom</th>
          <th>CIN</th>
          <th>√âcole</th>
          <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let etudiant of etudiants">
          <td>{{ etudiant.idEtudiant }}</td>
          <td>{{ etudiant.nomEt }}</td>
          <td>{{ etudiant.prenomEt }}</td>
          <td>{{ etudiant.cin }}</td>
          <td>{{ etudiant.ecole }}</td>
          <td>
            <button (click)="deleteEtudiant(etudiant.idEtudiant)" class="btn btn-danger btn-sm">
              üóëÔ∏è Delete
            </button>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Multi-Step Form Modal for Adding Etudiant -->
  <div *ngIf="addVisible" class="popup-overlay">
    <div class="popup-content">
      <form #etudiantForm="ngForm" (ngSubmit)="addEtudiant()" id="msform">
        <!-- Progress bar -->
        <ul id="progressbar">
          <li [class.active]="currentStep >= 1">Nom et Pr√©nom</li>
          <li [class.active]="currentStep >= 2">CIN</li>
          <li [class.active]="currentStep >= 3">√âcole</li>
        </ul>

        <!-- Step 1: Nom et Pr√©nom -->
        <fieldset *ngIf="currentStep === 1">
          <h2 class="fs-title">Nom et Pr√©nom</h2>
          <h3 class="fs-subtitle">√âtape 1</h3>
          <input type="text" placeholder="Nom" [(ngModel)]="etudiant.nomEt" name="nomEt" required />
          <input type="text" placeholder="Pr√©nom" [(ngModel)]="etudiant.prenomEt" name="prenomEt" required />
          <button type="button" class="next action-button" (click)="nextStep()">Suivant</button>
        </fieldset>

        <!-- Step 2: CIN -->
        <fieldset *ngIf="currentStep === 2">
          <h2 class="fs-title">CIN</h2>
          <h3 class="fs-subtitle">√âtape 2</h3>
          <input type="number" placeholder="CIN" [(ngModel)]="etudiant.cin" name="cin" required />
          <button type="button" class="previous action-button" (click)="previousStep()">Pr√©c√©dent</button>
          <button type="button" class="next action-button" (click)="nextStep()">Suivant</button>
        </fieldset>

        <!-- Step 3: √âcole -->
        <fieldset *ngIf="currentStep === 3">
          <h2 class="fs-title">√âcole</h2>
          <h3 class="fs-subtitle">√âtape 3</h3>
          <input type="text" placeholder="√âcole" [(ngModel)]="etudiant.ecole" name="ecole" required />
          <button type="button" class="previous action-button" (click)="previousStep()">Pr√©c√©dent</button>
          <button type="submit" class="action-button">Soumettre</button>
        </fieldset>
      </form>
      <button type="button" class="btn btn-secondary" (click)="toggleAddPopup()">Fermer</button>
    </div>
  </div>
</div>
